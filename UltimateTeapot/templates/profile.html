<!-- django_project/users/templates/users/profile.html -->
{% extends "base.html" %}
{% block content %}

{% if profile %}
    <h1>{{ profile.displayName }}'s Profile</h1>
    <p>Github: {{ profile.github }}</p>
    <img src="{{ profile.profileImage }}" alt="Profile Image">
    <br/>
    <strong>{{ profile.followers.all|length }} Followers</strong></br>
    {% for follower in profile.followers.all %}
        <a href="{{ follower.id }}">@{{ follower }}</a><br/>
    {% endfor %}
    <br/>

    <strong>{{ profile.users_following.all|length }} Following</strong></br>
    {% for following in profile.users_following.all %}
        <a href="{{ following.id }}">@{{ following }}</a><br/>
    {% endfor %}

    </br><strong>{{ profile.friends.all|length }} Friends</strong></br>
    {% for friend in profile.friends.all %}
    @{{ friend }}</a><br/>
    {% endfor %}

    </br>    
<div class="Follow button">
        <form method=POST>
            {% csrf_token %}
            {% if profile.user.username != user.profile.user.username %}
                {% if profile in user.profile.users_following.all %}
                    
                <button class="btn btn-outline-danger" name="follow" value="unfollow" type="submit">
                    Unfollow @{{ profile.user.username }}
                </button>
                {% else %}
            <button class="btn btn-outline-success" name="follow" value="follow" type="submit">
                Follow @{{ profile.user.username }}
            </button>
                    
                {% endif %}
            {% endif %}
        </form>
</div>

<h1>{{ profile.user.username }}'s Post</h1>
    {% if profile.user.username == user.profile.user.username %}
        {% for post in posts %}
        {{ post }}
        {% endfor %}
    {% endif %}


{% endif %}


{% endblock content %}